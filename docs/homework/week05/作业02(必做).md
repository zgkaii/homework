# 作业2

**题目描述**：写代码实现 Spring Bean 的装配，方式越多越好（XML、Annotation 都可以）。

------

> Bean的装配就是将Bean装配注入到Spring IoC容器中，也就是所谓的依赖注入。

## 基于XML的装配

### 设值注入(Setter Injection)

* 定义`IAccountService`接口

```java
public interface IAccountService {
    void saveAccount();
}
```

* 接口实现类`AccountServiceImpl`

```java
public class AccountServiceImpl implements IAccountService {
    private String name;
    private Integer age;
    private Date birthday;

    public void setName(String name) {
        this.name = name;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public void setBirthday(Date birthday) {
        this.birthday = birthday;
    }

    @Override
    public void saveAccount() {
        System.out.println(name + "," + age + "," + birthday);
    }
}
```

* 配置文件`applicationContext.xml`

```xml
    <!-- 配置一个日期对象 -->
    <bean id="now" class="java.util.Date"></bean>
    <!-- set方法注入 -->
    <bean id="accountService1" class="com.zgkaii.spring.mission.mission2.impl.AccountServiceImpl">
        <property name="name" value="zhangsan"></property>
        <property name="age" value="22"></property>
        <property name="birthday" ref="now"></property>
    </bean>
```

* 创建测试方法`testString()`

```java
    @Test
    public void testString() {
        // 定义Spring配置文件的路径
        String xmlPath = "applicationContext.xml";
        // 初始化Spring容器，加载配置文件
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
                xmlPath);
        // 通过容器获取UserDao实例
        IAccountService as = (IAccountService) applicationContext
                .getBean("accountService1");
        // 调用UserDao的save()方法
        as.saveAccount();
    }
```

* 运行结果

```java
zhangsan,22,Sat Apr 17 21:39:29 CST 2021
```

### 构造注入(Constructor Injection)

* 创建实现类`AccountServiceImpl2`

```java
public class AccountServiceImpl2 implements IAccountService {
    private String name;
    private Integer age;
    private Date birthday;

    public AccountServiceImpl2(String name, Integer age, Date birthday) {
        this.name = name;
        this.age = age;
        this.birthday = birthday;
    }

    @Override
    public void saveAccount() {
        System.out.println(name + "," + age + "," + birthday);
    }
}
```

* 修改配置文件`applicationContext.xml`

```xml
    <!-- 构造函数注入 -->
    <bean id="accountService2" class="com.zgkaii.spring.mission.mission2.impl.AccountServiceImpl2">
        <constructor-arg name="name" value="lisi"></constructor-arg>
        <constructor-arg name="age" value="18"></constructor-arg>
        <constructor-arg name="birthday" ref="now"></constructor-arg>
    </bean>
```

* 创建测试方法`testString()`

```java
    @Test
    public void testString() {
        // 定义Spring配置文件的路径
        String xmlPath = "applicationContext.xml";
        // 初始化Spring容器，加载配置文件
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
                xmlPath);
        // 通过容器获取UserDao实例
        IAccountService as = (IAccountService) applicationContext
                .getBean("accountService2");
        // 调用UserDao的save()方法
        as.saveAccount();
    }
```

* 运行结果

```java
lisi,18,Sat Apr 17 21:50:46 CST 2021
```

### 集合类型的注入

一下集合类型的注入都是采用的设值注入。

* 创建实现类`AccountServiceImpl3`

```java
@Data
public class AccountServiceImpl3 implements IAccountService {

    private String[] myStrs;
    private List<String> myList;
    private Set<String> mySet;
    private Map<String, String> myMap;
    private Properties myProps;

    @Override
    public void saveAccount() {
        System.out.println(Arrays.toString(myStrs));
        System.out.println(myList);
        System.out.println(mySet);
        System.out.println(myMap);
        System.out.println(myProps);
    }
}

```

* 修改配置文件`applicationContext.xml`

```xml
    <!-- 复杂类型的注入/集合类型的注入 -->
    <bean id="accountService3" class="com.zgkaii.spring.mission.mission2.impl.AccountServiceImpl3">
        <property name="myStrs">
            <set>
                <value>AAA</value>
                <value>BBB</value>
                <value>CCC</value>
            </set>
        </property>

        <property name="myList">
            <array>
                <value>AAA</value>
                <value>BBB</value>
                <value>CCC</value>
            </array>
        </property>

        <property name="mySet">
            <list>
                <value>AAA</value>
                <value>BBB</value>
                <value>CCC</value>
            </list>
        </property>

        <property name="myMap">
            <props>
                <prop key="testC">ccc</prop>
                <prop key="testD">ddd</prop>
            </props>
        </property>

        <property name="myProps">
            <map>
                <entry key="testA" value="aaa"></entry>
                <entry key="testB">
                    <value>BBB</value>
                </entry>
            </map>
        </property>
    </bean>

```

* 创建测试方法`testString()`

```java
    @Test
    public void testString() {
        // 定义Spring配置文件的路径
        String xmlPath = "applicationContext.xml";
        // 初始化Spring容器，加载配置文件
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
                xmlPath);
        // 通过容器获取UserDao实例
        IAccountService as = (IAccountService) applicationContext
                .getBean("accountService3");
        // 调用UserDao的save()方法
        as.saveAccount();
    }
```

* 运行结果

```java
[AAA, BBB, CCC]
[AAA, BBB, CCC]
[AAA, BBB, CCC]
{testD=ddd, testC=ccc}
{testA=aaa, testB=BBB}
```

## 基于Annotation装配



## 隐性自动装配